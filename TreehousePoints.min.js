/*
 * TreehousePoints.js
 * v0.1 - 2014
 * https://github.com/Whyounes/TreehousePoints
 * (c) RAFIE Younes; MIT License
 */
(function(){(window.th=function(a){a.th_id&&a.wrapper&&(this._url="http://teamtreehouse.com/"+a.th_id+".json",this._wrap=a.wrapper,this.circle=a.circle,this.circle.values=[],this.count=0,this.colors={HTML:"#39ADD1",CSS:"#2570A8",JavaScript:"#913B53",Ruby:"#E15258",iOS:"#53BBB4",Business:"#F9845B",Android:"#51B46D",PHP:"#665885",Wordpress:"#9D8AC7",Design:"#E0AB18","Development Tools":"#556B7C",others:"#e2e5e8",none:"#D4D9DD"},this.getJsonProfile())}).prototype={getJsonProfile:function(){that=this;
$.ajax({type:"GET",url:this._url,dataType:"json",success:function(a){a.points&&that.initCircle(a.points)},error:function(a,b,c){404==a.status&&$("#"+that._wrap).append("<h3>I think this profile doesn't exist :(</h3>")}})},initCircle:function(a){var b,c,d="";this.count=a.total;this.circle.id=this._wrap;this.circle.text=this.count;delete a.total;a=this.fixTotal(a);for(b in a)c=0<a[b]?this.colors[b]:this.colors.none,this.circle.values.push({percent:100*a[b]/this.count,color:c}),d+="<li style='float: left; width: 25%; margin: 2%;'><span class='topic_color' style='width: 15px;height: 15px;background-color: "+
c+";float: left;margin: 5px; border-radius: 50%;'></span><span class='points' style='font-weight: bold;'>"+a[b]+"</span><span class='topic' style='font-size: 12px; display: block; color: #999;'>"+b+"</span></li>";new Circle(this.circle);$("#"+this._wrap).append("<div class='points_wrap' style='float: left;width: 70%;padding: 30px;' ><ul style='list-style:none;'>"+d+"</ul></div>")},fixTotal:function(a){var b=0;for(point in a)b+=a[point];a.others=this.count-b;return a}}})();
